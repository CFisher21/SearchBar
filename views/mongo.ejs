<!-- include header -->
<%- include('include/_header') %>
<!-- /include header -->

<!--include nav-->
<%- include('include/_nav') %>
<!-- /include nav -->
<h1>Hello <%= name%></h1>
<form action="/mongoSearch" method="GET">
    <input type="search" name="search" placeholder="Search MongoDB">
    <label for="searchby">Search by: </label>
    <select id="searchby">
        <option value="firstname">First Name</option>
        <option value="lastname">Last Name</option>
        <option value="email">Email</option>
        <option value="occupation">Occupation</option>
    </select>
    <input type="submit" value="search">
</form>
<% if (typeof(result) !== 'undefined') { %>
    <table>
    <tr>
        <th>First Name </th>
        <th>Last Name</th>
        <th>Email</th>
        <th>Occupation</th> 
    </tr>   
    <% if(result.length > 0) { %>
        <% result.forEach(Data => { %>
                    <tr>
                        <th><%= Data.item.first_name%></th>
                        <th><%= Data.item.last_name%></th>
                        <th><%= Data.item.email%></th> 
                        <th><%= Data.item.occupation%></th> 
                    </tr>
            <% }) %>
    <% } %>
    </table>
<%}%>
<!-- include footer -->
<%- include('include/_footer') %>
<!-- /include footer -->